{"ast":null,"code":"/*!\nWaypoints Infinite Scroll Shortcut - 4.0.1\nCopyright Â© 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function () {\n  'use strict';\n\n  var $ = window.jQuery;\n  var Waypoint = window.Waypoint;\n  /* http://imakewebthings.com/waypoints/shortcuts/infinite-scroll */\n\n  function Infinite(options) {\n    this.options = $.extend({}, Infinite.defaults, options);\n    this.container = this.options.element;\n\n    if (this.options.container !== 'auto') {\n      this.container = this.options.container;\n    }\n\n    this.$container = $(this.container);\n    this.$more = $(this.options.more);\n\n    if (this.$more.length) {\n      this.setupHandler();\n      this.waypoint = new Waypoint(this.options);\n    }\n  }\n  /* Private */\n\n\n  Infinite.prototype.setupHandler = function () {\n    this.options.handler = $.proxy(function () {\n      this.options.onBeforePageLoad();\n      this.destroy();\n      this.$container.addClass(this.options.loadingClass);\n      $.get($(this.options.more).attr('href'), $.proxy(function (data) {\n        var $data = $($.parseHTML(data));\n        var $newMore = $data.find(this.options.more);\n        var $items = $data.find(this.options.items);\n\n        if (!$items.length) {\n          $items = $data.filter(this.options.items);\n        }\n\n        this.$container.append($items);\n        this.$container.removeClass(this.options.loadingClass);\n\n        if (!$newMore.length) {\n          $newMore = $data.filter(this.options.more);\n        }\n\n        if ($newMore.length) {\n          this.$more.replaceWith($newMore);\n          this.$more = $newMore;\n          this.waypoint = new Waypoint(this.options);\n        } else {\n          this.$more.remove();\n        }\n\n        this.options.onAfterPageLoad($items);\n      }, this));\n    }, this);\n  };\n  /* Public */\n\n\n  Infinite.prototype.destroy = function () {\n    if (this.waypoint) {\n      this.waypoint.destroy();\n    }\n  };\n\n  Infinite.defaults = {\n    container: 'auto',\n    items: '.infinite-item',\n    more: '.infinite-more-link',\n    offset: 'bottom-in-view',\n    loadingClass: 'infinite-loading',\n    onBeforePageLoad: $.noop,\n    onAfterPageLoad: $.noop\n  };\n  Waypoint.Infinite = Infinite;\n})();","map":null,"metadata":{},"sourceType":"module"}